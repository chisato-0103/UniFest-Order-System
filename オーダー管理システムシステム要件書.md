# オーダー管理システム要件書

## 目次

- [概要](#概要)
- [技術仕様・システム要件](#技術仕様・システム要件)
- [データ設計](#データ設計)
- [運用要件](#運用要件)
- [非機能要件](#非機能要件)
- [テスト要件](#テスト要件)
- [リスク管理](#リスク管理)
- [追加機能要件](#追加機能要件)
- [注文番号管理システム](#注文番号管理システム)
- [必要ウィンドウ](#必要ウィンドウ)
- [各画面の表示内容](#各画面の表示内容)
  - [オーダー注文画面での表示内容](#オーダー注文画面での表示内容)
  - [お客様側の端末で確認できる調理完了しているかわかる画面の表示内容](#お客様側の端末で確認できる調理完了しているかわかる画面の表示内容)
  - [お店側のモニターで調理完了しているかわかる画面の表示内容](#お店側のモニターで調理完了しているかわかる画面の表示内容)
  - [厨房でのオーダー確認画面の表示内容](#厨房でのオーダー確認画面の表示内容)
  - [支払い状況画面の表示内容](#支払い状況画面の表示内容)
  - [受け渡し状況を確認できる画面の表示内容](#受け渡し状況を確認できる画面の表示内容)
  - [全てのオーダーの履歴画面の表示内容](#全てのオーダーの履歴画面の表示内容)

## 概要

今回作成するシステムは、大学祭での店舗で使用するオーダー管理システムである。オーダーの注文・調理・支払い・受け渡し状況を統合的に管理し、効率的な店舗運営をサポートする。この要件定義書は前年度の店舗配置を基に作成している。

予算制約：無料で構築可能なソリューションを採用する。

## 必要ウィンドウ

- オーダー注文画面
- お客様側の端末で確認できる調理完了しているかわかる画面
- お店側のモニターで調理完了しているかわかる画面
- 厨房でのオーダー確認画面
- 支払い状況画面
- 受け渡し状況を確認できる画面
- 全てのオーダーの履歴画面

## 各画面の表示内容

### オーダー注文画面での表示内容

- メニュー表示（商品名、価格、商品画像）
- ショッピングカート機能（選択中の商品、数量変更、削除）
- 合計金額の表示
- 注文確定時の確認ダイアログ表示
- 注文完了時の注文番号と QR コード表示（お客様用状況確認アクセス用）
- 予想調理時間の表示（例：「約 15 分でお渡し予定」）
- 現在の混雑状況表示（待ち件数、混雑度の色分け表示）

### お客様側の端末で確認できる調理完了しているかわかる画面の表示内容

- 支払い状況の表示（未払い/支払い済み）
- 注文番号とオーダー内容の紐付け表示
- 調理完了時の通知表示（「商品の準備ができました。店舗までお越しください」）
- QR コードによる簡単アクセス（注文番号の QR コードをスキャンして状況確認）
- リアルタイム待ち時間表示
- 調理進捗状況の表示
- キャンセル・変更ボタン（調理開始前のみ表示）

### お店側のモニターで調理完了しているかわかる画面の表示内容

- 調理中のオーダー番号一覧表示
- 調理完了・受け渡し待ちの注文番号一覧表示
- 定期演奏会等のイベント広告スペース
- 現在の混雑状況表示（待ち件数、混雑度の色分け）
- 緊急停止ボタン
- 通知履歴の表示

### 厨房でのオーダー確認画面の表示内容

- オーダー詳細情報の表示（商品名、数量、特記事項）
- 調理完了ボタン（押下時に音声通知が店舗モニターに送信）
- オーダー履歴へのアクセス機能（誤操作時の復旧用）
- スタッフ権限でのキャンセル・変更機能
- 調理時間の予想表示・更新機能

### 支払い状況画面の表示内容

- 注文完了済みオーダーの一覧表示
- 注文番号別の合計金額表示
- 支払い完了処理ボタン
- 履歴画面へのアクセス機能（キャンセル処理用）

### 受け渡し状況を確認できる画面の表示内容

- 受け渡し担当者向け操作画面
- 商品受け渡し完了処理ボタン
- 履歴画面へのアクセス機能（キャンセル処理用）

### 全てのオーダーの履歴画面の表示内容

- 支払い状況履歴の表示
- 受け渡し完了履歴の表示
- 全オーダーのステータス一覧表示
- 売上集計機能

## 技術仕様・システム要件

### 使用技術

- フロントエンド：HTML/CSS/JavaScript（無料）
- バックエンド：Node.js + Express（無料）
- データベース：SQLite（無料）
- QR コード生成：qrcode.js（無料ライブラリ）
- 音声通知：Web Audio API（ブラウザ標準機能）
- デプロイ：Heroku/Vercel/GitHub Pages（無料枠利用）

### 対応デバイス

- PC（店舗側モニター、厨房、支払い・受け渡し担当者）
- スマートフォン/タブレット（お客様向け）
- レスポンシブデザイン対応

### セキュリティ要件

- 注文データの暗号化
- セッション管理
- 不正アクセス防止

## データ設計

### オーダーデータ構造

- オーダー ID（自動採番）
- 注文番号（お客様向け表示用、4 桁数字など）
- 注文日時
- 商品リスト（商品 ID、商品名、数量、単価）
- 合計金額
- ステータス（注文受付/調理中/調理完了/支払済/受渡完了）
- 特記事項
- 予想調理時間
- 調理開始時刻
- 変更履歴（変更日時、変更内容、変更者）
- キャンセル理由（キャンセル時のみ）

### メニューデータ構造

- 商品 ID
- 商品名
- 価格
- カテゴリ
- 在庫状況
- 商品画像 URL
- 予想調理時間（分）

### 通知データ構造

- 通知 ID
- 通知種別（調理完了/受渡遅延/緊急停止など）
- 対象注文番号
- 通知日時
- 通知内容
- 重要度（緊急/通常/情報）
- 確認状況（未確認/確認済み）

### システム状態データ構造

- 現在の混雑状況（待ち件数、混雑度）
- 緊急停止状態（ON/OFF）
- 営業状況（営業中/準備中/終了）
- 手動運用モード（ON/OFF）

## 運用要件

### 営業時間

- 大学祭期間中の営業時間：未定
- システム稼働時間を明確化

### スタッフ体制

- 注文受付担当：1 名
- 厨房担当：2-3 名
- 支払い担当：1 名
- 受け渡し担当：1 名

### バックアップ・復旧

- データの定期バックアップ
- システム障害時の手動オペレーション手順

## 非機能要件

### 性能要件

- 同時アクセス数：最大 50 ユーザー
- レスポンス時間：3 秒以内
- 稼働率：99%以上（営業時間中）

### ユーザビリティ

- 直感的な操作画面
- 大きなボタンサイズ（タッチ操作対応）
- 分かりやすいアイコン・色分け

### 拡張性

- メニュー項目の追加・変更が容易
- 将来的な機能追加に対応可能

## テスト要件

### テスト項目

- 機能テスト（各画面の動作確認）
- 統合テスト（画面間の連携確認）
- 負荷テスト（ピーク時の動作確認）
- ユーザビリティテスト（実際のスタッフによる操作確認）

### テストスケジュール

- 開発完了：大学祭の 2 週間前
- テスト期間：1 週間
- 本番運用開始：大学祭開始日

## リスク管理

### 想定リスク

- システム障害
- ネットワーク接続不良
- 端末故障
- 操作ミス

### 対策

- 手動オペレーション手順書の準備
- 予備端末の準備
- スタッフ向け操作研修の実施

## 追加機能要件

### QR コード活用（優先度：高）

- お客様向けの注文画面アクセス用 QR コード生成
- 店舗入口やテーブルに設置する QR コード
- スマートフォンのカメラで QR コードを読み取り、注文画面に直接アクセス
- 注文番号と QR コードの紐付け（お客様の注文状況確認用）
- 注文完了時にスマートフォン画面に注文番号を大きく表示

### 音声通知機能

- 調理完了時の音声アラート（厨房 → 店舗モニター）
- 受け渡し準備完了時の音声通知
- 通知音のオン/オフ切り替え機能
- 音量調整機能

### 在庫管理機能（将来的な検討項目）

- 商品別在庫数の設定・管理
- 売り切れ商品の自動非表示
- 在庫残数の警告表示
- 手動での在庫更新機能

**注意事項**：在庫管理機能は、リアルタイムでの在庫消費状況の記録が必要となるため、運用面での負荷が高い。大学祭期間中の忙しい状況では現実的ではない可能性が高く、実装は慎重に検討する必要がある。

### 待ち時間表示機能（優先度：高）

- 注文時に予想調理時間の表示（例：「約 15 分でお渡し予定」）
- 混雑状況に応じた調理時間の自動調整
- お客様のスマートフォンでリアルタイム待ち時間確認
- 調理進捗に応じた待ち時間の更新

### 通知機能の強化（優先度：高）

- 調理完了時の画面上での目立つ通知表示
- 受け渡し遅延時の再通知機能
- 通知履歴の表示
- 重要度別の通知表示（緊急・通常・情報）

### 混雑状況表示（優先度：中）

- 現在の注文待ち件数表示
- 混雑度の視覚的表示（色分け：緑・黄・赤）
- 空いている時間帯の案内表示
- 予想待ち時間の表示

### 緊急時対応機能（優先度：高）

- 緊急停止ボタン（新規注文の受付停止）
- システム障害時の手動運用モード
- 全注文状況の一括確認・変更機能
- 緊急時メッセージの全画面表示

### キャンセル・変更機能（優先度：中）

- 支払い前のオーダーキャンセル機能（お客様・スタッフ両方）
- 数量変更機能（調理開始前のみ、お客様・スタッフ両方）
- キャンセル理由の記録（分析用）
- スタッフ権限でのキャンセル・変更（調理開始後も可能）
- 変更履歴の記録と表示

## 注文番号管理システム

### 注文番号の仕様

- 4 桁の数字（例：0001、0002...）
- 1 日単位でリセット（営業開始時に 0001 から開始）
- 重複を避けるため、システム内で自動採番

### スマートフォン表示

- 注文完了時に注文番号を大きく表示（お客様が店舗スタッフに見せやすいサイズ）
- 注文番号の下に状況表示（「調理中」「完成」「お支払い待ち」等）
- QR コードも併せて表示（スタッフがスキャンして詳細確認可能）

### 店舗側での確認方法

- 各画面で注文番号による検索・表示
- お客様のスマートフォンに表示された注文番号を目視確認
- 必要に応じて QR コードスキャンによる詳細確認
