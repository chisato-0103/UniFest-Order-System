# オーダー管理システム要件書

## 目次

- [概要](#概要)
- [技術仕様・システム要件](#技術仕様・システム要件)
- [データ設計](#データ設計)
- [運用要件](#運用要件)
- [非機能要件](#非機能要件)
- [テスト要件](#テスト要件)
- [リスク管理](#リスク管理)
- [追加機能要件](#追加機能要件)
- [注文番号管理システム](#注文番号管理システム)
- [必要ウィンドウ](#必要ウィンドウ)
- [各画面の表示内容](#各画面の表示内容)
  - [オーダー注文画面での表示内容](#オーダー注文画面での表示内容)
  - [お客様側の端末で確認できる調理完了しているかわかる画面の表示内容](#お客様側の端末で確認できる調理完了しているかわかる画面の表示内容)
  - [お店側のモニターで調理完了しているかわかる画面の表示内容](#お店側のモニターで調理完了しているかわかる画面の表示内容)
  - [厨房でのオーダー確認画面の表示内容](#厨房でのオーダー確認画面の表示内容)
  - [支払い状況画面の表示内容](#支払い状況画面の表示内容)
  - [受け渡し状況を確認できる画面の表示内容](#受け渡し状況を確認できる画面の表示内容)
  - [全てのオーダーの履歴画面の表示内容](#全てのオーダーの履歴画面の表示内容)

## 概要

今回作成するシステムは、大学祭での店舗で使用するオーダー管理システムである。オーダーの注文・調理・支払い・受け渡し状況を統合的に管理し、効率的な店舗運営をサポートする。この要件定義書は前年度の店舗配置を基に作成している。

**販売商品：たこ焼き**

- 提供形態：8 個入り・12 個入り・16 個入りパックを想定
- 調理時間：約 8-12 分（一度に複数個作成可能）
- 温度管理：調理完了から受け渡しまで温かい状態を保つ必要がある

予算制約：無料で構築可能なソリューションを採用する。

## 必要ウィンドウ

- オーダー注文画面
- お客様側の端末で確認できる調理完了しているかわかる画面
- お店側のモニターで調理完了しているかわかる画面
- 厨房でのオーダー確認画面
- 支払い状況画面
- 受け渡し状況を確認できる画面
- 全てのオーダーの履歴画面
- **商品管理画面（管理者用）**
- **システム設定画面（管理者用）**

## 各画面の表示内容

### オーダー注文画面での表示内容

- メニュー表示（商品名、価格、商品画像）
  - たこ焼き 8 個入り
  - たこ焼き 12 個入り
  - たこ焼き 16 個入り
  - トッピング選択（ソース、マヨネーズ、青のり、かつお節等）
- ショッピングカート機能（選択中の商品、数量変更、削除）
- 合計金額の表示
- 注文確定時の確認ダイアログ表示
- 注文完了時の注文番号と QR コード表示（お客様用状況確認アクセス用）
- 予想調理時間の表示（例：「約 10 分でお渡し予定」）
- 現在の混雑状況表示（待ち件数、混雑度の色分け表示）
- 提供時の温度に関する注意事項表示（「熱々でお渡しします。やけどにご注意ください」）

### お客様側の端末で確認できる調理完了しているかわかる画面の表示内容

- 支払い状況の表示（未払い/支払い済み）
- 注文番号とオーダー内容の紐付け表示
- 調理完了時の通知表示（「商品の準備ができました。店舗までお越しください」）
- QR コードによる簡単アクセス（注文番号の QR コードをスキャンして状況確認）
- リアルタイム待ち時間表示
- 調理進捗状況の表示
- キャンセル・変更ボタン（調理開始前のみ表示）

### お店側のモニターで調理完了しているかわかる画面の表示内容

- 調理中のオーダー番号一覧表示
- 調理完了・受け渡し待ちの注文番号一覧表示
- 定期演奏会等のイベント広告スペース
- 現在の混雑状況表示（待ち件数、混雑度の色分け）
- 緊急停止ボタン
- 通知履歴の表示

### 厨房でのオーダー確認画面の表示内容

- オーダー詳細情報の表示（商品名、数量、トッピング詳細、特記事項）
- 調理進捗状況の表示（準備中/焼き開始/焼き上がり/盛り付け完了）
- 調理完了ボタン（押下時に音声通知が店舗モニターに送信）
- 同時調理可能数の表示（たこ焼き器の容量に基づく）
- 調理時間タイマー機能（8-12 分のカウントダウン）
- 温度管理アラート（調理完了から一定時間経過時の警告）
- オーダー履歴へのアクセス機能（誤操作時の復旧用）
- スタッフ権限でのキャンセル・変更機能
- 調理時間の予想表示・更新機能

### 支払い状況画面の表示内容

- 注文完了済みオーダーの一覧表示
- 注文番号別の合計金額表示
- 支払い完了処理ボタン
- 履歴画面へのアクセス機能（キャンセル処理用）

### 受け渡し状況を確認できる画面の表示内容

- 受け渡し担当者向け操作画面
- 商品受け渡し完了処理ボタン
- 履歴画面へのアクセス機能（キャンセル処理用）

### 全てのオーダーの履歴画面の表示内容

- 支払い状況履歴の表示
- 受け渡し完了履歴の表示
- 全オーダーのステータス一覧表示
- 売上集計機能

### 商品管理画面の表示内容（管理者用）

- **商品一覧表示**
  - 全商品の一覧表示（商品名、価格、カテゴリ、販売状況）
  - 商品の有効/無効切り替え（一時的な販売停止）
  - 商品の並び順変更機能

- **商品追加機能**
  - 新商品の追加フォーム（商品名、価格、カテゴリ、調理時間、商品画像）
  - トッピングの追加・編集機能
  - 商品説明・アレルギー情報の登録

- **商品編集機能**
  - 既存商品の情報変更（価格、名前、調理時間等）
  - 商品画像の変更・削除
  - 商品の削除機能（注文履歴がある場合は無効化のみ）

- **カテゴリ管理**
  - カテゴリの追加・編集・削除
  - カテゴリ別商品表示順の設定

- **プリセット管理**
  - よく使用される商品セットの保存
  - 季節限定商品の管理
  - 商品の一括価格変更機能

### システム設定画面の表示内容（管理者用）

- **基本設定**
  - 店舗名・営業時間の設定
  - システムの営業状態切り替え（営業中/準備中/終了）
  - 注文受付の開始/停止設定

- **調理設定**
  - 調理器具数の設定（たこ焼き器の台数）
  - 同時調理可能数の設定
  - 調理時間の基準値設定

- **通知設定**
  - 音声通知のオン/オフ設定
  - 通知音の音量調整
  - 温度管理アラートの時間設定

- **表示設定**
  - 混雑状況の表示基準設定
  - 待ち時間計算の調整
  - 画面レイアウトの設定

- **データ管理**
  - 日次データリセット機能
  - 売上データのエクスポート
  - システムバックアップ機能

## 技術仕様・システム要件

### 使用技術

- フロントエンド：HTML/CSS/JavaScript（無料）
- バックエンド：Node.js + Express（無料）
- データベース：SQLite（無料）
- QR コード生成：qrcode.js（無料ライブラリ）
- 音声通知：Web Audio API（ブラウザ標準機能）
- デプロイ：Heroku/Vercel/GitHub Pages（無料枠利用）

### 対応デバイス

- PC（店舗側モニター、厨房、支払い・受け渡し担当者）
- スマートフォン/タブレット（お客様向け）
- レスポンシブデザイン対応

### セキュリティ要件

- 注文データの暗号化
- セッション管理
- 不正アクセス防止

## データ設計

### オーダーデータ構造

- オーダー ID（自動採番）
- 注文番号（お客様向け表示用、4 桁数字など）
- 注文日時
- 商品リスト（商品 ID、商品名、数量、単価）
- 合計金額
- ステータス（注文受付/調理中/調理完了/支払済/受渡完了）
- 特記事項
- 予想調理時間
- 調理開始時刻
- 変更履歴（変更日時、変更内容、変更者）
- キャンセル理由（キャンセル時のみ）

### メニューデータ構造

- 商品 ID（自動採番）
- 商品名
- 価格
- カテゴリ ID（メイン、トッピング、セット等）
- 販売状況（有効/無効/売り切れ）
- 商品画像 URL
- 商品説明
- アレルギー情報
- 予想調理時間（分）
- 同時調理可能数
- 表示順序
- 作成日時
- 更新日時
- 削除フラグ（論理削除）

### カテゴリデータ構造

- カテゴリ ID（自動採番）
- カテゴリ名
- 表示順序
- 有効フラグ
- 作成日時
- 更新日時

### トッピングデータ構造

- トッピング ID（自動採番）
- トッピング名
- 価格
- 有効フラグ
- 対象商品 ID（どの商品に適用可能か）
- 表示順序
- 作成日時
- 更新日時

### 通知データ構造

- 通知 ID
- 通知種別（調理完了/受渡遅延/緊急停止など）
- 対象注文番号
- 通知日時
- 通知内容
- 重要度（緊急/通常/情報）
- 確認状況（未確認/確認済み）

### システム状態データ構造

- 現在の混雑状況（待ち件数、混雑度）
- 緊急停止状態（ON/OFF）
- 営業状況（営業中/準備中/終了）
- 手動運用モード（ON/OFF）

### システム設定データ構造

- 設定 ID
- 設定項目名
- 設定値
- データ型（文字列/数値/真偽値）
- 説明
- 更新日時
- 更新者

### 商品変更履歴データ構造

- 変更履歴 ID
- 商品 ID
- 変更内容（商品名/価格/有効性等）
- 変更前の値
- 変更後の値
- 変更日時
- 変更者
- 変更理由

## 運用要件

### 営業時間

- 大学祭期間中の営業時間：未定
- システム稼働時間を明確化

### スタッフ体制

- 注文受付担当：1 名
- 厨房担当：2-3 名
- 支払い担当：1 名
- 受け渡し担当：1 名
- **システム管理者：1 名（商品管理・システム設定担当）**

### 運用手順

- **営業開始前**
  - 商品の有効性確認・調整
  - 調理器具数の設定確認
  - システム設定の確認

- **営業中**
  - 商品の売り切れ・再開管理
  - 価格変更（必要に応じて）
  - 新商品の追加（特別メニュー等）

- **営業終了後**
  - 売上データの確認・エクスポート
  - 翌日の商品設定準備
  - システム設定の調整

### バックアップ・復旧

- データの定期バックアップ
- システム障害時の手動オペレーション手順

## 非機能要件

### 性能要件

- 同時アクセス数：最大 50 ユーザー
- レスポンス時間：3 秒以内
- 稼働率：99%以上（営業時間中）

### ユーザビリティ

- 直感的な操作画面
- 大きなボタンサイズ（タッチ操作対応）
- 分かりやすいアイコン・色分け

### 拡張性

- メニュー項目の追加・変更が容易（管理画面での操作）
- 新しい商品カテゴリの追加が可能
- トッピング組み合わせの柔軟な設定
- 調理時間や価格の動的変更
- 将来的な機能追加に対応可能
- 商品データの import/export 機能
- 複数店舗対応の準備（データ構造の拡張性）

## テスト要件

### テスト項目

- 機能テスト（各画面の動作確認）
- 統合テスト（画面間の連携確認）
- 負荷テスト（ピーク時の動作確認）
- ユーザビリティテスト（実際のスタッフによる操作確認）
- **商品管理テスト（商品の追加・編集・削除の動作確認）**
- **システム設定テスト（設定変更の動作確認）**
- **データ整合性テスト（商品変更時の注文データへの影響確認）**

### テストスケジュール

- 開発完了：大学祭の 2 週間前
- テスト期間：1 週間
- 本番運用開始：大学祭開始日

## リスク管理

### 想定リスク

- システム障害
- ネットワーク接続不良
- 端末故障
- 操作ミス
- **商品データの誤変更・削除**
- **システム設定の誤変更**
- **商品変更タイミングでの注文エラー**

### 対策

- 手動オペレーション手順書の準備
- 予備端末の準備
- スタッフ向け操作研修の実施
- **商品データの定期バックアップ**
- **管理者権限の適切な設定**
- **商品変更時の確認ダイアログ表示**
- **変更履歴の記録と復元機能**
- **システム設定変更時の影響範囲の明示**

## 追加機能要件

### QR コード活用（優先度：高）

- お客様向けの注文画面アクセス用 QR コード生成
- 店舗入口やテーブルに設置する QR コード
- スマートフォンのカメラで QR コードを読み取り、注文画面に直接アクセス
- 注文番号と QR コードの紐付け（お客様の注文状況確認用）
- 注文完了時にスマートフォン画面に注文番号を大きく表示

### 音声通知機能

- 調理完了時の音声アラート（厨房 → 店舗モニター）
- 受け渡し準備完了時の音声通知
- 通知音のオン/オフ切り替え機能
- 音量調整機能

### 在庫管理機能（将来的な検討項目）

- 商品別在庫数の設定・管理
- 売り切れ商品の自動非表示
- 在庫残数の警告表示
- 手動での在庫更新機能

**注意事項**：在庫管理機能は、リアルタイムでの在庫消費状況の記録が必要となるため、運用面での負荷が高い。大学祭期間中の忙しい状況では現実的ではない可能性が高く、実装は慎重に検討する必要がある。

### 待ち時間表示機能（優先度：高）

- 注文時に予想調理時間の表示（例：「約 10 分でお渡し予定」）
- たこ焼き器の使用状況に応じた調理時間の自動調整
- 混雑状況に応じた調理時間の自動調整
- お客様のスマートフォンでリアルタイム待ち時間確認
- 調理進捗に応じた待ち時間の更新（準備中 → 焼き開始 → 焼き上がり → 盛り付け完了）
- 温度管理による受け渡し推奨時間の表示（「熱々のうちにお受け取りください」）

### 通知機能の強化（優先度：高）

- 調理完了時の画面上での目立つ通知表示
- 受け渡し遅延時の再通知機能
- 通知履歴の表示
- 重要度別の通知表示（緊急・通常・情報）

### 混雑状況表示（優先度：中）

- 現在の注文待ち件数表示
- 混雑度の視覚的表示（色分け：緑・黄・赤）
- 空いている時間帯の案内表示
- 予想待ち時間の表示

### 緊急時対応機能（優先度：高）

- 緊急停止ボタン（新規注文の受付停止）
- システム障害時の手動運用モード
- 全注文状況の一括確認・変更機能
- 緊急時メッセージの全画面表示

### キャンセル・変更機能（優先度：中）

- 支払い前のオーダーキャンセル機能（お客様・スタッフ両方）
- 数量変更機能（調理開始前のみ、お客様・スタッフ両方）
- キャンセル理由の記録（分析用）
- スタッフ権限でのキャンセル・変更（調理開始後も可能）
- 変更履歴の記録と表示

### たこ焼き特有の機能要件（優先度：高）

- **調理器具管理**

  - たこ焼き器の使用状況表示（使用中/空き/清掃中）
  - 同時調理可能数の制限管理
  - 調理器具ごとの調理時間トラッキング

- **温度管理機能**

  - 調理完了から受け渡しまでの経過時間表示
  - 温度低下警告（調理完了から 15 分経過時など）
  - 再加熱の必要性判定機能

- **トッピング管理**

  - トッピングの組み合わせ選択機能
  - トッピング在庫管理（青のり、かつお節等）
  - アレルギー情報の表示機能

- **品質管理**
  - 調理完了時の品質チェック項目表示
  - 焼き加減の確認機能
  - 盛り付け完了の確認機能

### 商品管理機能（優先度：高）

- **動的商品管理**
  - 営業中の商品追加・変更・削除
  - 商品の一時販売停止・再開機能
  - 価格のリアルタイム変更
  - 商品画像の変更・削除

- **カテゴリ管理システム**
  - カテゴリの追加・編集・削除
  - カテゴリ別商品表示順の設定
  - 季節限定カテゴリの管理

- **トッピング管理システム**
  - トッピングの追加・編集・削除
  - トッピング組み合わせの制限設定
  - トッピング価格の個別設定

- **商品データ管理**
  - 商品情報の一括インポート・エクスポート
  - 商品変更履歴の記録・表示
  - 商品売上データの分析

- **プリセット機能**
  - 人気商品セットの事前登録
  - 時間帯別おすすめ商品の設定
  - 商品の自動表示/非表示スケジュール

### システム設定管理（優先度：高）

- **基本設定管理**
  - 店舗情報の設定・変更
  - 営業時間・営業状態の管理
  - システム全体の設定変更

- **調理設定管理**
  - 調理器具数の動的変更
  - 調理時間の基準値調整
  - 同時調理可能数の設定

- **表示設定管理**
  - 画面レイアウトの設定
  - 色分け・アイコンの設定
  - 言語設定（将来的な多言語対応）

- **データ管理機能**
  - 設定データのバックアップ・復元
  - システム設定の変更履歴管理
  - 設定の一括エクスポート・インポート

## 注文番号管理システム

### 注文番号の仕様

- 4 桁の数字（例：0001、0002...）
- 1 日単位でリセット（営業開始時に 0001 から開始）
- 重複を避けるため、システム内で自動採番

### スマートフォン表示

- 注文完了時に注文番号を大きく表示（お客様が店舗スタッフに見せやすいサイズ）
- 注文番号の下に状況表示（「調理中」「完成」「お支払い待ち」等）
- QR コードも併せて表示（スタッフがスキャンして詳細確認可能）

### 店舗側での確認方法

- 各画面で注文番号による検索・表示
- お客様のスマートフォンに表示された注文番号を目視確認
- 必要に応じて QR コードスキャンによる詳細確認
